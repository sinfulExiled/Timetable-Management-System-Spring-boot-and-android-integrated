<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
<title>TMS</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="icon" href="pics/banger.png" type="image/gif" sizes="16x16" />
<link rel="stylesheet"
	href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link rel="stylesheet" type="text/css" href="/css/util.css">
<link rel="stylesheet" type="text/css" href="/css/main.css">
<link href="/css/LogInCss.css" rel="stylesheet" type="text/css" />

</head>
<body>

	<div class="top-logo">
		<header>
			<img src="/pics/banger.png" alt=""
				style="width: 250px; height: 100px;" />
			<div class="headers">
				<h1>TMS</h1>
			</div>
			<div class="widgets">
				<a href="https://www.facebook.com/" class="fa fa-facebook"></a> <a
					href="https://twitter.com/" class="fa fa-twitter"></a>
			</div>
	</div>
	<div class="top-container">
		<h1>Timetable Management System</h1>
		<div class="topnav">
			 
				<a class="active" th:href = "@{/teacherRoomspage}">Back</a> 
			<div class="logged topnav-right">
				<h3 id="username" style="color: white;"></h3>

			</div>
		</div>
		<table  border="1" class = "table table-striped table-responsive-md" style="overflow-x: auto">
			<thead>
				<tr>
					<th>Already Booked Rooms</th>


				</tr>
				<tr>
					<th>Class Date</th>
					<th>Day</th>
					<th>Start Time</th>
					<th>End Time</th>
					<th>Venue</th>
					<th>Lecturer Name</th>
					<th>Batch</th>
					<th>Module</th>
					<th>Degree type</th>

				</tr>
			</thead>
			<tbody>
				<tr th:each="classes : ${bookedClasses}">
					<td th:text="${classes.date}"></td>
					<td th:text="${classes.day}"></td>
					<td th:text="${classes.time}"></td>
					<td th:text="${classes.endTime}"></td>
					<td th:text="${classes.venue}"></td>
					<td th:text="${classes.lecturerName}"></td>
					<td th:text="${classes.batch}"></td>
					<td th:text="${classes.module}"></td>
					<td th:text="${classes.degreeType}"></td>


				</tr>

			</tbody>

		</table>


		<div class="limiter">
			<div class="container-login100">

				<form onsubmit="return checkform()"
					class="login100-form validate-form" id="" th:object="${Room}"
					action="#" method="POST" th:action="@{/makeRoomReservation}"
					style="padding-top: 20px;">


					<span class="login100-form-title p-b-34"> Reserve Room </span>

				
				<div class="wrap-input100 rs1-wrap-input100 validate-input m-b-20"
						data-validate="BookedTeacher">
						<input class="input100" th:field="*{Number}" type="text"
							placeholder="BookedTeacher"> <span class="focus-input100"></span>
					</div>
					
					<div class="wrap-input100 rs1-wrap-input100 validate-input m-b-20"
						data-validate="BookedTeacher">
						<input class="input100" th:field="*{BookedTeacher}" type="text"
							placeholder="BookedTeacher"> <span class="focus-input100"></span>
					</div>
					<div
						class="wrap-input100 rs1-wrap-input100 validate-input m-b-20"
						data-validate="hid">
						<input id="pickup" class="input100" th:field="*{floor}" value="" type="text" name=""
							placeholder="Floor"> <span class="focus-input100"></span>
					</div>
					<input type="hidden" th:field="*{MaxCapacity}" >
					<input type="hidden" th:field="*{MinCapacity}" >
					<input type="hidden" th:field="*{Availability}" >

					<div class="wrap-input100 rs1-wrap-input100 validate-input m-b-20"
						data-validate="pickupdate">
						<input class="input100" th:field="*{ReservedDate}" id="datefield"
							onfocus="(this.type = 'date')" onblur="(this.type = 'text')"
							name="pickupdate" placeholder="Date for Class"> <span
							class="focus-input100"></span>
					</div>



					<div
						class="wrap-input100 rs2-wrap-input100 validate-input m-b-20 wrap-input100-hideborder wrap-input100-select"
						data-validate="pickuptime">
						<select id="picktime" class="input100box" name="startTime">
							<option disabled="disabled" selected="selected">Start
								Time</option>


							<option value="08:00" data-position="1">08:00 AM</option>

							<option value="08:30" data-position="2">08:30 AM</option>

							<option value="09:00" data-position="3">09:00 AM</option>

							<option value="09:30" data-position="4">09:30 AM</option>

							<option value="10:00" data-position="5" selected>10:00
								AM</option>

							<option value="10:30" data-position="6">10:30 AM</option>

							<option value="11:00" data-position="7">11:00 AM</option>

							<option value="11:30" data-position="8">11:30 AM</option>

							<option value="12:00" data-position="9">12:00 PM</option>

							<option value="12:30" data-position="10">12:30 PM</option>

							<option value="13:00" data-position="11">01:00 PM</option>

							<option value="13:30" data-position="12">01:30 PM</option>

							<option value="14:00" data-position="13">02:00 PM</option>

							<option value="14:30" data-position="14">02:30 PM</option>

							<option value="15:00" data-position="15">03:00 PM</option>

							<option value="15:30" data-position="16">03:30 PM</option>

							<option value="16:00" data-position="17">04:00 PM</option>

							<option value="16:30" data-position="18">04:30 PM</option>

							<option value="17:00" data-position="19">05:00 PM</option>

							<option value="17:30" data-position="20">05:30 PM</option>

							<option value="18:00" data-position="21">06:00 PM</option>


						</select> <select id="picktime" class="input100box" name="endTime">
							<option disabled="disabled" selected="selected">End Time</option>


							<option value="08:00" data-position="1">08:00 AM</option>

							<option value="08:30" data-position="2">08:30 AM</option>

							<option value="09:00" data-position="3">09:00 AM</option>

							<option value="09:30" data-position="4">09:30 AM</option>

							<option value="10:00" data-position="5" selected>10:00
								AM</option>

							<option value="10:30" data-position="6">10:30 AM</option>

							<option value="11:00" data-position="7">11:00 AM</option>

							<option value="11:30" data-position="8">11:30 AM</option>

							<option value="12:00" data-position="9">12:00 PM</option>

							<option value="12:30" data-position="10">12:30 PM</option>

							<option value="13:00" data-position="11">01:00 PM</option>

							<option value="13:30" data-position="12">01:30 PM</option>

							<option value="14:00" data-position="13">02:00 PM</option>

							<option value="14:30" data-position="14">02:30 PM</option>

							<option value="15:00" data-position="15">03:00 PM</option>

							<option value="15:30" data-position="16">03:30 PM</option>

							<option value="16:00" data-position="17">04:00 PM</option>

							<option value="16:30" data-position="18">04:30 PM</option>

							<option value="17:00" data-position="19">05:00 PM</option>

							<option value="17:30" data-position="20">05:30 PM</option>

							<option value="18:00" data-position="21">06:00 PM</option>


						</select>


					</div>





					<div class="container-login100-form-btn">
						<button onSubmit="return date_compare();"
							class="login100-form-btn">Reserve Room</button>


					</div>

				</form>

				<script
					src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
				<script language="JavaScript" type="text/javascript"
					src="/js/jquery-1.2.6.min.js"></script>
				<script language="JavaScript" type="text/javascript"
					src="/js/jquery-ui-personalized-1.5.2.packed.js"></script>
				<script language="JavaScript" type="text/javascript"
					src="/js/sprinkle.js"></script>


				<script>


				console.log("working");
                                            var today = new Date();
                                      
                                            var maxday = new Date();
                                            var dd = today.getDate();
                                            var dd2 = today.getDate();
                                          
                                            var mm = today.getMonth() + 1; 
                                            var yyyy = today.getFullYear();

                                            var newMM = today.getMonth() + 1;
                                           
                                            if (dd < 10) {
                                                dd = '0' + dd
                                            }
                                            if (mm < 10) {
                                                mm = '0' + mm
                                            }

                                            today = yyyy + '-' + mm + '-' + dd;
                                            
                                            document.getElementById("datefield").setAttribute("min", today);
                                           
                                           


                                            var getDaysInMonth = function (month, year) {

                                                return new Date(year, month, 0).getDate();

                                            };

                                            var totaldays = getDaysInMonth(mm, yyyy);
                                           
                                            var maxdaysLeftinMonth = totaldays - dd;
                                           
                                          
                                           
                                           
                                            if (parseInt(dd) + 14 > totaldays) {
                                                 var maxDaysleft = 14 - maxdaysLeftinMonth;

                                             
                                                if (newMM < 10) {
                                                    newMM = '0' + newMM
                                                     

                                                }
                                                
                                                if (maxDaysleft < 10 > 0) {
                                                    maxDaysleft = '0' + maxDaysleft
                                                }
                                             
                                                  
                                               newMM = (parseInt(newMM) + 1);
                                               
                                               

                                                maxday = yyyy + '-' + newMM + '-' + maxDaysleft;
                                                
                                                document.getElementById("datefield").setAttribute("max", maxday);
                                                
                                             

                                            }
                                           
                                            if (parseInt(dd) + 14 < totaldays) {
                                                var maxDaysleft = parseInt(maxdaysLeftinMonth)-14;

                                                if (newMM < 10) {
                                                    newMM = '0' + (newMM-1);

                                                }
                                               
                                               

                                                dd2=parseInt(dd)+14;
                                                maxday = yyyy + '-' + newMM + '-' + dd2;
                                                
                                                document.getElementById("datefield").setAttribute("max", maxday);
                                                
                                                console.log( newMM);

                                            }



                                            $(document).ready(function () {
                                                $("#picktime").change(function () {
                                                    
                                                     var dropdate = new Date();

                                                    dropdate = document.getElementById("dropday").value;
                                                    console.log(dropdate);
                                                    if (today == dropdate) {

                                                        if ($(this).val() === '08:00') {
                                                            $("#droptime").val('13:00');

                                                        }
                                                        if ($(this).val() === '08:30') {
                                                            $("#droptime").val('13:30');
                                                        }
                                                        if ($(this).val() === '09:00') {
                                                            $("#droptime").val('14:00');
                                                        }

                                                        if ($(this).val() === '09:30') {
                                                            $("#droptime").val('14:30');
                                                        }

                                                        if ($(this).val() === '10:00') {
                                                            $("#droptime").val('15:00');
                                                        }
                                                        if ($(this).val() === '10:30') {
                                                            $("#droptime").val('15:30');
                                                        }
                                                        if ($(this).val() === '11:00') {
                                                            $("#droptime").val('16:00');
                                                        }
                                                        if ($(this).val() === '11:30') {
                                                            $("#droptime").val('16:30');
                                                        }
                                                        if ($(this).val() === '12:00') {
                                                            $("#droptime").val('17:00');
                                                        }
                                                        if ($(this).val() === '12:30') {
                                                            $("#droptime").val('17:30');
                                                        }
                                                        if ($(this).val() === '13:00') {
                                                            $("#droptime").val('18:00');
                                                        }
                                                    }
                                                });
                                            });


                                            function checkform()
                                            {
                                                var date1 = new Date($('#datefield').val());
                                                var date2 = new Date($('#dropday').val());




                                                var a = document.getElementById("picktime").selectedIndex;
                                                var b = document.getElementById("picktime").options;


                                                var x = document.getElementById("droptime").selectedIndex;
                                                var y = document.getElementById("droptime").options;
                                                
                                            


                                                day = date1.getDate();
                                                month = date1.getMonth() + 1;
                                                year = date1.getFullYear();


                                                day2 = date2.getDate();
                                                month2 = date2.getMonth() + 1;
                                                year2 = date2.getFullYear();



                                                var t1 = document.getElementById("picktime").value;
                                                var t2 = document.getElementById("droptime").value;

                                                if (day === day2 && ((x - a) < 10) && t1 == ('13:00') || t1 == ('13:30') || t1 == ('14:00') || t1 == ('14:30') || t1 == ('15:00') || t1 == ('15:30') || t1 == ('16:00') || t1 == ('16:30') || t1 == ('17:00') || t1 == ('17:30') || t1 == ('18:00'))

                                                {
                                                    
                                                        alert("Select a time period between 8am to 12.30pm, for bookings are made for a minimum of 5 hours");
                                                        return false;
                                                   

                                                }
                                                if (day === day2 && ((x - a) <= 10) && t2 == ('08:00') || t2 == ('08:30') || t2 == ('09:00') || t2 == ('09:30') || t2 == ('10:00') || t2 == ('10:30') || t2 == ('11:00') || t2 == ('11:30') || t2 == ('12:00') || t2 == ('12:30'))

                                                {
                                                   
                                                        alert("Select a time period between 1pm to 6pm for bookings are made for a minimum of 5 hours");
                                                        return false;
                                                  
                                                } else
                                                {
                                                    return true;
                                                }

                                            }


                </script>

				<script th:inline="javascript">

/*<![CDATA[*/
  var myval = /*[[${mykey}]]*/ "Test";
  var listVals = /*[[${myList}]]*/ "Test1";
/*]]>*/

console.log("check "+myval);
 var usernameDiv = document.getElementById("username");
 var tq = document.createTextNode(myval);
 var q = document.createElement("P");
 q.appendChild(tq);
 usernameDiv.appendChild(q);
 
 var mainDiv = document.getElementById("main");
 for(i=0; i<listVals.length; i++){
	 //create text node
	 var t = document.createTextNode(listVals[i].name+' '+listVals[i].age);
	 //create para node
	 var p = document.createElement("P");
	 //attach text to para
	 p.appendChild(t);
	 //attach para to div
	 mainDiv.appendChild(p);
 }
 

</script>

				<script> 
function submit() { 
  /*Put all the data posting code here*/ 
 document.getElementById("makeForm").reset(); 
} 
</script>

			</div>
		</div>

		<div class="outbox">
			<footer class="footer-distributed">

				<div class="footer-left">

					<p class="footer-links">
						<a href="HomePage.html">Home</a> <a href="AboutUs.html">About
							Us</a> <a href="ContactUs.html">Contact</a>
					</p>

					<p class="footer-company-name">TMS 2020</p>

				</div>

				<div class="footer-right">

					<form method="get" action="#">
						<input placeholder="Search our website" name="search" /> <i
							class="fa fa-search"></i>

					</form>

				</div>

			</footer>
		</div>
	</div>

</body>
</html>
